<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>일본어 정복 🦊</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="global-header" class="top-header" style="display:none;">
        <div class="header-left-group">
            <button id="btn-global-back" class="btn-header-icon">
                <span style="font-size: 24px; font-weight: bold;">❮</span>
            </button>
            <button class="btn-header-icon" onclick="goHome()">🏠</button>
        </div>

        <div id="header-title" style="font-weight:bold; color:#555;"></div>
        <div style="width: 50px;"></div>
    </div>

    <button id="global-mute-btn" onclick="toggleGlobalMute()">🔊</button>
    <div id="feedback-box"></div>

    <div id="loading-screen">
        <h2>데이터 가져오는 중... 🦊</h2>
        <p>잠시만 기다려주세요콩!</p>
    </div>

    <div id="start-screen" class="screen active">
        <h1>일본어 문자 & 단어<br>완전 정복 🦊</h1>
        <p class="info-text">공부할 내용을 선택하세요!</p>
        <button class="btn-hira" onclick="selectCharType('hiragana')">히라가나 (あ)</button>
        <button class="btn-kata" onclick="selectCharType('katakana')">카타카나 (ア)</button>
        <button class="btn-sheet" onclick="showCategorySelect()">일본어 단어장 📄</button>
    </div>

    <div id="category-select-screen" class="screen">
        <h1 style="color:#2E8B57; margin-top:20px;">어떤 단어를<br>공부할까요? 🦊</h1>

        <button class="btn-sheet" style="background-color: #FFB6C1;" onclick="selectSheetCategory('히라가나')">
            ひら 히라가나 단어<br><span style="font-size:14px">(한자 없는 기초 단어)</span>
        </button>

        <button class="btn-sheet" style="background-color: #FFA07A;" onclick="selectSheetCategory('카타카나')">
            カタ 카타카나 단어<br><span style="font-size:14px">(외래어 등)</span>
        </button>

        <button class="btn-sheet" style="background-color: #87CEFA;" onclick="selectSheetCategory('한자')">
            漢字 한자 단어<br><span style="font-size:14px">(한자와 읽는 법)</span>
        </button>
    </div>

    <div id="mode-select-screen" class="screen">
        <h1 id="selected-mode-title" style="margin-top:20px;">히라가나</h1>
        <p class="info-text">학습 방식을 선택하세요!</p>
        <button class="btn-mode-study" onclick="gotoQuantitySelect()">📖 공부하기<br><span style="font-size:14px">(카드
                뒤집기)</span></button>
        <button class="btn-mode-test" onclick="startTest()">📝 시험보기<br><span style="font-size:14px">(객관식
                테스트)</span></button>
    </div>

    <div id="quantity-select-screen" class="screen">
        <h1 style="color:#87CEEB; margin-top:20px;">공부 범위 선택</h1>
        <p class="info-text">몇 개의 단어를 공부할까요?</p>
        <button class="btn-count-20" onclick="startStudy('20')">🌱 20개만 하기</button>
        <button class="btn-count-30" onclick="startStudy('30')">🎵 30개만 하기</button>
        <button class="btn-count-40" onclick="startStudy('40')">🔥 40개 도전</button>
        <button class="btn-count-all" onclick="showTotalList()">👑 전체 목록 보기</button>
    </div>

    <div id="list-view-screen" class="screen">
        <h1 style="color:#20B2AA; margin-top:20px;">단어 목록 🦊</h1>
        <p class="info-text">터치하면 자세히 볼 수 있어요콩!</p>

        <div class="popup-scroll-area" style="height: 60vh;">
            <table id="total-list-table">
                <thead>
                    <tr>
                        <th width="30%">단어</th>
                        <th width="30%">발음</th>
                        <th width="40%">뜻</th>
                    </tr>
                </thead>
                <tbody id="total-list-body">
                </tbody>
            </table>
        </div>
    </div>

    <div id="detail-view-screen" class="screen">
        <div class="middle-zone">
            <div class="question-container">
                <div id="detail-pron" class="pron-small"></div>
                <div id="detail-jp" class="jp-big"></div>
            </div>

            <div id="detail-meaning" class="meaning-text" style="visibility: visible;">뜻</div>
            <button class="btn-sound-icon" onclick="playDetailSound()">🔊</button>
        </div>

        <div class="bottom-nav-group">
            <div class="nav-row">
                <button class="btn-control" onclick="showPrevDetail()">◀ 이전</button>
                <button class="btn-control" onclick="showNextDetail()">다음 ▶</button>
            </div>
        </div>
    </div>

    <div id="study-screen" class="screen">
        <div class="info-text" style="margin-top: 40px; font-weight:bold; color:#FF8C00;">공부 모드</div>
        <div id="study-progress" class="info-text">1 / 46</div>

        <div class="question-container">
            <div id="study-pron" class="pron-small"></div>
            <div id="study-jp" class="jp-big"></div>
        </div>

        <div id="study-meaning" class="meaning-text">뜻</div>

        <button class="btn-sound" onclick="playSoundAndShowText()">🔊 발음/뜻 보기</button>
        <div style="display: flex; justify-content: center; gap: 10px;">
            <button class="btn-correct" onclick="checkStudyAnswer(true)">알아요!</button>
            <button class="btn-wrong" onclick="checkStudyAnswer(false)">몰라요</button>
        </div>
    </div>

    <div id="test-screen" class="screen">
        <div class="info-text" style="margin-top: 40px; font-weight:bold; color:#FF6347;">시험 모드 (20문제)</div>
        <div id="test-progress" class="info-text">1 / 20</div>

        <p class="info-text">다음 단어의 뜻은?</p>

        <div class="question-container">
            <div id="test-pron" class="pron-small">pron</div>
            <div id="test-jp" class="jp-big">Japan</div>
        </div>

        <button class="btn-test-sound" onclick="playTestSound()">🔊 발음 듣기</button>
        <div class="options-container" id="options-container"></div>
    </div>

    <div id="result-screen" class="screen">
        <h1 style="margin-top:20px;">결과 발표!</h1>
        <div id="score-count" class="info-text">맞은 개수: 0 / 0</div>

        <div id="final-score" class="score-text">0 점</div>
        <div id="grade-msg" class="grade-msg"></div>

        <div id="wrong-msg" style="display:none; margin-top:20px;">
            <button style="background-color: #FFB6C1;" onclick="openWrongList()">오답 목록 보기</button>
        </div>
        <button style="background-color: #DDDDDD;" onclick="goHome()">처음으로</button>
    </div>

    <div id="wrong-list-popup">
        <div class="popup-content">
            <button class="btn-popup-close-x" onclick="closeWrongList()">✕</button>
            <h2>오답 노트</h2>
            <p id="wrong-count-display" style="color: red; font-weight: bold;">총 0개 틀림</p>
            <div class="popup-scroll-area">
                <table id="wrong-table">
                    <thead>
                        <tr>
                            <th>단어</th>
                            <th>발음</th>
                            <th>뜻</th>
                        </tr>
                    </thead>
                    <tbody id="wrong-table-body"></tbody>
                </table>
            </div>
            <button class="btn-close" onclick="closeWrongList()">닫기 (Close)</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>